<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Exploratory Analysis</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="Report.html">Report</a>
</li>
<li class="dropdown-header">Webcast</li>
<li>
  <a href="exploratory-analysis.html">Exploratory Analysis</a>
</li>
<li>
  <a href="pollution_linear_models.html">Regression Model</a>
</li>
<li>
  <a href="pollution_state.html">Pollution By State</a>
</li>
<li>
  <a href="https://github.com/arajann/finalproject/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Exploratory Analysis</h1>

</div>


<p> </p>
<p>To understand the pulltion-related factors that act upon cancer incidence and death, we obtained, cleaned, and analyzed pollution data that spanned from 2000-2016. This data contained concentrations from the known pollutants NO2, O3, SO2, and CO.</p>
<hr />
<div id="exploring-pollution-data-set" class="section level1">
<h1>Exploring Pollution Data Set</h1>
<p> </p>
<p>In the first table below, you can see the average concentrations of each pollutant in question in the United States for each year over the 17-year span.</p>
<pre class="r"><code>modified_pollution =
  read_csv(&quot;data/uspollution_us_2000_2016.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;%
  select(state, date_local, no2_mean, o3_mean, 
         so2_mean, co_mean) %&gt;%
  rename(
    no2 = no2_mean,
    co = co_mean,
    o3 = o3_mean,
    so2 = so2_mean
  ) %&gt;% 
  separate(date_local, into = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;), sep = &quot;\\-&quot;) %&gt;%
  select(-c(&quot;month&quot;, &quot;day&quot;)) %&gt;%
  group_by(year, state) %&gt;%
  summarize(across(everything(), mean)) %&gt;%
  mutate_if(is.numeric, ~round(., 3)) %&gt;%
  filter(state != &quot;Country Of Mexico&quot;) %&gt;%
  group_by(year) %&gt;%
  summarize(across(everything(), mean)) %&gt;%
  select(-c(state)) %&gt;% 
  mutate(
    year = as.numeric(year)
  )

modified_pollution %&gt;% 
  mutate_if(is.numeric, ~round(., 3)) %&gt;%
  rename(&quot;no2 (ppb)&quot; = &quot;no2&quot;, &quot;o3 (ppm)&quot; = &quot;o3&quot;, &quot;so2 (ppb)&quot; = &quot;so2&quot;, &quot;co (ppm)&quot; = &quot;co&quot;) %&gt;%
  knitr::kable(caption = &quot;United States Pollutant Concentration from 2000-2016&quot;)</code></pre>
<table>
<caption>United States Pollutant Concentration from 2000-2016</caption>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="right">no2 (ppb)</th>
<th align="right">o3 (ppm)</th>
<th align="right">so2 (ppb)</th>
<th align="right">co (ppm)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2000</td>
<td align="right">17.323</td>
<td align="right">0.025</td>
<td align="right">4.396</td>
<td align="right">0.582</td>
</tr>
<tr class="even">
<td align="right">2001</td>
<td align="right">17.670</td>
<td align="right">0.026</td>
<td align="right">3.598</td>
<td align="right">0.476</td>
</tr>
<tr class="odd">
<td align="right">2002</td>
<td align="right">15.537</td>
<td align="right">0.028</td>
<td align="right">2.899</td>
<td align="right">0.477</td>
</tr>
<tr class="even">
<td align="right">2003</td>
<td align="right">14.555</td>
<td align="right">0.027</td>
<td align="right">3.144</td>
<td align="right">0.467</td>
</tr>
<tr class="odd">
<td align="right">2004</td>
<td align="right">14.945</td>
<td align="right">0.024</td>
<td align="right">3.219</td>
<td align="right">0.437</td>
</tr>
<tr class="even">
<td align="right">2005</td>
<td align="right">15.297</td>
<td align="right">0.026</td>
<td align="right">3.129</td>
<td align="right">0.437</td>
</tr>
<tr class="odd">
<td align="right">2006</td>
<td align="right">13.284</td>
<td align="right">0.026</td>
<td align="right">2.877</td>
<td align="right">0.396</td>
</tr>
<tr class="even">
<td align="right">2007</td>
<td align="right">12.208</td>
<td align="right">0.026</td>
<td align="right">2.407</td>
<td align="right">0.372</td>
</tr>
<tr class="odd">
<td align="right">2008</td>
<td align="right">10.844</td>
<td align="right">0.026</td>
<td align="right">1.967</td>
<td align="right">0.323</td>
</tr>
<tr class="even">
<td align="right">2009</td>
<td align="right">9.917</td>
<td align="right">0.026</td>
<td align="right">1.674</td>
<td align="right">0.300</td>
</tr>
<tr class="odd">
<td align="right">2010</td>
<td align="right">10.668</td>
<td align="right">0.027</td>
<td align="right">1.424</td>
<td align="right">0.310</td>
</tr>
<tr class="even">
<td align="right">2011</td>
<td align="right">10.972</td>
<td align="right">0.027</td>
<td align="right">1.229</td>
<td align="right">0.288</td>
</tr>
<tr class="odd">
<td align="right">2012</td>
<td align="right">10.446</td>
<td align="right">0.028</td>
<td align="right">0.931</td>
<td align="right">0.292</td>
</tr>
<tr class="even">
<td align="right">2013</td>
<td align="right">10.188</td>
<td align="right">0.026</td>
<td align="right">0.917</td>
<td align="right">0.261</td>
</tr>
<tr class="odd">
<td align="right">2014</td>
<td align="right">9.591</td>
<td align="right">0.026</td>
<td align="right">1.011</td>
<td align="right">0.260</td>
</tr>
<tr class="even">
<td align="right">2015</td>
<td align="right">9.253</td>
<td align="right">0.026</td>
<td align="right">0.851</td>
<td align="right">0.265</td>
</tr>
<tr class="odd">
<td align="right">2016</td>
<td align="right">10.988</td>
<td align="right">0.026</td>
<td align="right">0.646</td>
<td align="right">0.280</td>
</tr>
</tbody>
</table>
<p>Below, we have included another data frame with the means across the entire 17-year span.</p>
<pre class="r"><code>modified_pollution %&gt;% 
   pivot_longer(
    no2:co,
    names_to = &quot;pollutant_type&quot;,
    values_to = &quot;concentration&quot;
  )  %&gt;% 
  mutate(measurement = case_when(
    pollutant_type %in% c(&quot;no2&quot;, &quot;so2&quot;) ~ &quot;ppb&quot;,
    pollutant_type %in% c(&quot;co&quot;, &quot;o3&quot;) ~ &quot;ppm&quot;)) %&gt;%
   group_by(pollutant_type, measurement) %&gt;% 
   summarize(
    mean_concentration = mean(concentration),
    median_concentration = median(concentration),
    sd_concentration = sd(concentration)) %&gt;% 
  arrange(measurement) %&gt;%
  knitr::kable(digits = 3)</code></pre>
<table>
<colgroup>
<col width="17%" />
<col width="14%" />
<col width="22%" />
<col width="25%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">pollutant_type</th>
<th align="left">measurement</th>
<th align="right">mean_concentration</th>
<th align="right">median_concentration</th>
<th align="right">sd_concentration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">no2</td>
<td align="left">ppb</td>
<td align="right">12.570</td>
<td align="right">10.988</td>
<td align="right">2.782</td>
</tr>
<tr class="even">
<td align="left">so2</td>
<td align="left">ppb</td>
<td align="right">2.136</td>
<td align="right">1.967</td>
<td align="right">1.153</td>
</tr>
<tr class="odd">
<td align="left">co</td>
<td align="left">ppm</td>
<td align="right">0.366</td>
<td align="right">0.323</td>
<td align="right">0.098</td>
</tr>
<tr class="even">
<td align="left">o3</td>
<td align="left">ppm</td>
<td align="right">0.026</td>
<td align="right">0.026</td>
<td align="right">0.001</td>
</tr>
</tbody>
</table>
<p> </p>
<hr />
<div id="comparing-distributions-of-pollutant-concentrations" class="section level2">
<h2>Comparing Distributions of Pollutant Concentrations</h2>
<p> </p>
<p>To compare the distributions of the pollutants to each other, we created a series of boxplots. As you can see, NO2 has the highest average concentration of any of the pollutants in ppm, and also has a skewed-right shape. CO and O3 have much narrowers distributions (in addition to much lower mean concentrations), making their shape harder to discern. SO2, however, appears to be approximately normally distributed.</p>
<pre class="r"><code>ppb_plot =
  modified_pollution %&gt;% 
  pivot_longer(
    no2:co,
    names_to = &quot;pollutant_type&quot;,
    values_to = &quot;concentration&quot;
  ) %&gt;% 
  group_by(pollutant_type) %&gt;% 
  filter(pollutant_type %in% c(&quot;no2&quot;, &quot;so2&quot;)) %&gt;%
  ggplot(aes(x = pollutant_type, y = concentration)) + 
  geom_boxplot() +
  labs(
    x = &quot;Pollutant Type&quot;,
    y = &quot;Concentration (ppb)&quot;,) + theme_bw() 

ppm_plot =
   modified_pollution %&gt;% 
  pivot_longer(
    no2:co,
    names_to = &quot;pollutant_type&quot;,
    values_to = &quot;concentration&quot;
  ) %&gt;% 
  group_by(pollutant_type) %&gt;% 
  filter(pollutant_type %in% c(&quot;o3&quot;, &quot;co&quot;)) %&gt;%
  ggplot(aes(x = pollutant_type, y = concentration)) + 
  geom_boxplot() +
  labs(
    x = &quot;Pollutant Type&quot;,
    y = &quot;Concentration (ppm)&quot;,) + theme_bw()

ppb_plot + ppm_plot + plot_annotation(title = 
                                        &quot;Distribution of Concentration Values for each Pollutant Type&quot;)</code></pre>
<p><img src="exploratory-analysis_files/figure-html/unnamed-chunk-3-1.png" width="90%" /></p>
<p>The next plot we created shows the pollution concentration with respect to time. This plot reveals that while NO2 and SO2 have been decreasing in concentration in recent years, that CO and O3 have remained relatively stable.</p>
<pre class="r"><code>ppm_point =
  modified_pollution %&gt;% 
  pivot_longer(
    no2:co,
    names_to = &quot;pollutant_type&quot;,
    values_to = &quot;concentration&quot;
  ) %&gt;% 
  filter(pollutant_type %in% c(&quot;o3&quot;, &quot;co&quot;)) %&gt;%
  ggplot(aes(x = year,y = concentration, group = pollutant_type, color = pollutant_type)) +
  geom_point() +
  geom_line() +
  scale_color_viridis(discrete = TRUE) +
  theme_bw() +
  labs(
    title = &quot;&quot;,
    x = &quot;Year&quot;,
    y = &quot;Pollutant Concentration(ppm)&quot;
  ) 

ppb_point =
  modified_pollution %&gt;% 
  pivot_longer(
    no2:co,
    names_to = &quot;pollutant_type&quot;,
    values_to = &quot;concentration&quot;
  ) %&gt;% 
  filter(pollutant_type %in% c(&quot;no2&quot;, &quot;so2&quot;)) %&gt;%
  ggplot(aes(x = year,y = concentration, group = pollutant_type, color = pollutant_type)) +
  geom_point() +
  geom_line() +
  scale_color_viridis(discrete = TRUE) +
  theme_bw() +
  labs(
    title = &quot;&quot;,
    x = &quot;Year&quot;,
    y = &quot;Pollutant Concentration(ppb)&quot;
  ) 

ppb_point / ppm_point + plot_annotation(title = 
                                        &quot;Trends in Polluntant Concentration in the US from 2000-2016&quot;)</code></pre>
<p><img src="exploratory-analysis_files/figure-html/unnamed-chunk-4-1.png" width="90%" /></p>
<hr />
</div>
</div>
<div id="exploring-lung-cancer-data" class="section level1">
<h1>Exploring Lung Cancer Data</h1>
<p> </p>
<div id="exploring-incidence-of-lung-cancer" class="section level2">
<h2>Exploring Incidence of Lung Cancer</h2>
<p> </p>
<p>Here, an interactive map of the US that shows incidence rate of lung/bronchus cancer by state is at the bottom of this page, and gives a visualization of regional incidence trends. From this, it can be seen that southern states and northern midwest states have the highest incidence rates of lung and bronchus cancers. Kentucky had the highest incidence of lung and bronchus cancer in 2013-2017 and Utah had the lowest incidence rate.</p>
<pre class="r"><code>g = list(
  scope = &#39;usa&#39;,
  projection = list(type = &#39;albers usa&#39;),
  showlakes = TRUE,
  lakecolor = toRGB(&#39;white&#39;)
)

inc_state =
  read_excel(&quot;data/IncRate.xlsx&quot;, sheet = &quot;State&quot;, 
             skip = 6) %&gt;%
  janitor::clean_names() %&gt;% 
  separate(
    col = breast_both_sexes_combined,
    into = c(&quot;breast_total&quot;, &quot;female_breast_only&quot;),
    sep = &quot;-&quot;
  ) %&gt;% 
  mutate(
    breast_male = if_else(breast_male == &quot;n/a&quot;, &quot;0&quot;, breast_male),
    cervix_male = if_else(cervix_male == &quot;n/a&quot;, &quot;0&quot;, cervix_male),
    colon_excluding_rectum_both_sexes_combined = 
      if_else(colon_excluding_rectum_both_sexes_combined == &quot;n/a&quot;, &quot;0&quot;,
              colon_excluding_rectum_both_sexes_combined),
    colon_excluding_rectum_female = if_else(colon_excluding_rectum_female == &quot;n/a&quot;, &quot;0&quot;,
                                            colon_excluding_rectum_female),
    colon_excluding_rectum_male = if_else(colon_excluding_rectum_male == &quot;n/a&quot;, &quot;0&quot;,
                                          colon_excluding_rectum_male)) %&gt;%
  filter(state != &quot;Puerto Rico&quot;)

inc_state %&gt;%
  select(state, lung_and_bronchus_both_sexes_combined) %&gt;%
  mutate(code = state.abb[match(state, state.name)],
         lung_and_bronchus_both_sexes_combined = as.numeric(lung_and_bronchus_both_sexes_combined)) %&gt;%
  filter(code != is.na(code)) %&gt;%
  relocate(state, code) %&gt;%
  plot_geo(., locationmode = &#39;USA-states&#39;) %&gt;% 
  add_trace(
    z = ~lung_and_bronchus_both_sexes_combined, text = ~state, locations = ~code,
    color = ~lung_and_bronchus_both_sexes_combined, colors = &#39;viridis&#39;
  ) %&gt;% 
  colorbar(title = &quot;Incidence Rate per 100,000&quot;) %&gt;% 
  layout(
    title = &quot;Distribution of Lung/Bronchus Cancer Incidence Rate by State in 2013-2017&quot;,
    geo = g
  )</code></pre>
<div id="htmlwidget-703d372e223c59779f5c" style="width:90%;height:460.8px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-703d372e223c59779f5c">{"x":{"visdat":{"1dac61cb4660":["function () ","plotlyVisDat"]},"cur_data":"1dac61cb4660","attrs":{"1dac61cb4660":{"locationmode":"USA-states","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"z":{},"text":{},"locations":{},"color":{},"colors":"viridis","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","scene":{"zaxis":{"title":"lung_and_bronchus_both_sexes_combined"}},"geo":{"domain":{"x":[0,1],"y":[0,1]},"scope":"usa","projection":{"type":"albers usa"},"showlakes":true,"lakecolor":"rgba(255,255,255,1)"},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5},"title":"Distribution of Lung/Bronchus Cancer Incidence Rate by State in 2013-2017"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"colorbar":{"title":"Incidence Rate per 100,000","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(71,17,100,1)"],["0.0833333333333334","rgba(72,31,112,1)"],["0.125","rgba(71,45,123,1)"],["0.166666666666667","rgba(68,58,131,1)"],["0.208333333333333","rgba(64,70,136,1)"],["0.25","rgba(59,82,139,1)"],["0.291666666666667","rgba(54,93,141,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(44,114,142,1)"],["0.416666666666667","rgba(40,124,142,1)"],["0.458333333333333","rgba(36,134,142,1)"],["0.5","rgba(33,144,141,1)"],["0.541666666666667","rgba(31,154,138,1)"],["0.583333333333333","rgba(32,164,134,1)"],["0.625","rgba(39,173,129,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(71,193,110,1)"],["0.75","rgba(93,200,99,1)"],["0.791666666666667","rgba(117,208,84,1)"],["0.833333333333333","rgba(143,214,68,1)"],["0.875","rgba(170,220,50,1)"],["0.916666666666667","rgba(199,224,32,1)"],["0.958333333333333","rgba(227,228,24,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"locationmode":"USA-states","z":[64.8,55.8,46.7,77.2,41.5,41.4,59.6,66.9,57.7,62.8,45.7,49.5,63.7,72.2,63.3,56.2,91,66.2,72.1,56.4,61.6,63.3,56.1,74.9,72,53.7,57,63.7,55.3,38.5,58.7,67.7,57.7,67.8,67.4,54.1,63.5,69.4,64.4,59,74.5,50.6,26,61.1,56.4,54,79.8,59.1,42.2],"text":["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],"locations":["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],"type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":26,"cmax":91,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(71,17,100,1)"],["0.0833333333333334","rgba(72,31,112,1)"],["0.125","rgba(71,45,123,1)"],["0.166666666666667","rgba(68,58,131,1)"],["0.208333333333333","rgba(64,70,136,1)"],["0.25","rgba(59,82,139,1)"],["0.291666666666667","rgba(54,93,141,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(44,114,142,1)"],["0.416666666666667","rgba(40,124,142,1)"],["0.458333333333333","rgba(36,134,142,1)"],["0.5","rgba(33,144,141,1)"],["0.541666666666667","rgba(31,154,138,1)"],["0.583333333333333","rgba(32,164,134,1)"],["0.625","rgba(39,173,129,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(71,193,110,1)"],["0.75","rgba(93,200,99,1)"],["0.791666666666667","rgba(117,208,84,1)"],["0.833333333333333","rgba(143,214,68,1)"],["0.875","rgba(170,220,50,1)"],["0.916666666666667","rgba(199,224,32,1)"],["0.958333333333333","rgba(227,228,24,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[64.8,55.8,46.7,77.2,41.5,41.4,59.6,66.9,57.7,62.8,45.7,49.5,63.7,72.2,63.3,56.2,91,66.2,72.1,56.4,61.6,63.3,56.1,74.9,72,53.7,57,63.7,55.3,38.5,58.7,67.7,57.7,67.8,67.4,54.1,63.5,69.4,64.4,59,74.5,50.6,26,61.1,56.4,54,79.8,59.1,42.2]}},"geo":"geo","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p><em>Note. The raw data for incidence rate of cancer by cancer type did not include data point for Nevada in the combined national rates. Original data recommends referring to publications and sources page on American Cancer Society website</em></p>
<p> </p>
</div>
<div id="exploring-mortality-of-lung-cancer" class="section level2">
<h2>Exploring Mortality of Lung Cancer</h2>
<p> </p>
<p>Similarly, the interactive map of the mortality rate from lung and bronchus cancer in 2013-2017 shows comparable distribution across the states as the incidence rate.</p>
<pre class="r"><code>g = list(
  scope = &#39;usa&#39;,
  projection = list(type = &#39;albers usa&#39;),
  showlakes = TRUE,
  lakecolor = toRGB(&#39;white&#39;)
)

death_state =
  read_excel(&quot;data/DeathRate.xlsx&quot;, sheet = &quot;State&quot;, 
             skip = 6) %&gt;%
  janitor::clean_names() %&gt;% 
  separate(
    col = breast_both_sexes_combined,
    into = c(&quot;breast_total&quot;, &quot;female_breast_only&quot;),
    sep = &quot;-&quot;
  ) %&gt;% 
  select(-female_breast_only) %&gt;%
  mutate(
    breast_male = if_else(breast_male == &quot;n/a&quot;, &quot;0&quot;, breast_male),
    cervix_male = if_else(cervix_male == &quot;n/a&quot;, &quot;0&quot;, cervix_male),
  ) %&gt;%
  mutate_at(vars(-(&quot;state&quot;)), as.numeric) %&gt;%
  filter(state != &quot;Puerto Rico&quot;)


death_state %&gt;%
  select(state, lung_and_bronchus_both_sexes_combined) %&gt;%
  mutate(code = state.abb[match(state, state.name)],
         lung_and_bronchus_both_sexes_combined = as.numeric(lung_and_bronchus_both_sexes_combined)) %&gt;%
  filter(code != is.na(code)) %&gt;%
  relocate(state, code) %&gt;%
  plot_geo(., locationmode = &#39;USA-states&#39;) %&gt;% 
  add_trace(
    z = ~lung_and_bronchus_both_sexes_combined, text = ~state, locations = ~code,
    color = ~lung_and_bronchus_both_sexes_combined, colors = &#39;viridis&#39;
  ) %&gt;% 
  colorbar(title = &quot;Mortality Rate per 100,000&quot;) %&gt;% 
  layout(
    title = &quot;Distribution of Lung/Bronchus Cancer Mortality Rate by State in 2013-2017&quot;,
    geo = g
  )</code></pre>
<div id="htmlwidget-d43aed8003807d76bf0a" style="width:90%;height:460.8px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d43aed8003807d76bf0a">{"x":{"visdat":{"1dac2d9111e8":["function () ","plotlyVisDat"]},"cur_data":"1dac2d9111e8","attrs":{"1dac2d9111e8":{"locationmode":"USA-states","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"z":{},"text":{},"locations":{},"color":{},"colors":"viridis","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","scene":{"zaxis":{"title":"lung_and_bronchus_both_sexes_combined"}},"geo":{"domain":{"x":[0,1],"y":[0,1]},"scope":"usa","projection":{"type":"albers usa"},"showlakes":true,"lakecolor":"rgba(255,255,255,1)"},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5},"title":"Distribution of Lung/Bronchus Cancer Mortality Rate by State in 2013-2017"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"colorbar":{"title":"Mortality Rate per 100,000","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(71,17,100,1)"],["0.0833333333333333","rgba(72,31,112,1)"],["0.125","rgba(71,45,123,1)"],["0.166666666666667","rgba(68,58,131,1)"],["0.208333333333333","rgba(64,70,136,1)"],["0.25","rgba(59,82,139,1)"],["0.291666666666667","rgba(54,93,141,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(44,114,142,1)"],["0.416666666666667","rgba(40,124,142,1)"],["0.458333333333333","rgba(36,134,142,1)"],["0.5","rgba(33,144,141,1)"],["0.541666666666667","rgba(31,154,138,1)"],["0.583333333333333","rgba(32,164,134,1)"],["0.625","rgba(39,173,129,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(71,193,110,1)"],["0.75","rgba(93,200,99,1)"],["0.791666666666667","rgba(117,208,84,1)"],["0.833333333333333","rgba(143,214,68,1)"],["0.875","rgba(170,220,50,1)"],["0.916666666666667","rgba(199,224,32,1)"],["0.958333333333333","rgba(227,228,24,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"locationmode":"USA-states","z":[48.5,36.6,31.3,52.8,28.1,26.5,33.1,43.2,37.5,40.9,29.3,32.4,41.1,48.7,41.3,41.6,60.4,47.5,46.7,37.2,37.1,44.1,35.2,52.8,48.7,35.9,37.9,39.3,41.1,33.7,26.8,33.6,44.1,35.1,46.7,50,36.6,40.8,42.2,42.7,39.3,51.3,34.1,18.1,41.4,38.8,35.5,53.6,38.5,30.9],"text":["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],"locations":["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],"type":"choropleth","marker":{"line":{"colorbar":{"title":"","ticklen":2},"cmin":18.1,"cmax":60.4,"colorscale":[["0","rgba(68,1,84,1)"],["0.0416666666666667","rgba(71,17,100,1)"],["0.0833333333333333","rgba(72,31,112,1)"],["0.125","rgba(71,45,123,1)"],["0.166666666666667","rgba(68,58,131,1)"],["0.208333333333333","rgba(64,70,136,1)"],["0.25","rgba(59,82,139,1)"],["0.291666666666667","rgba(54,93,141,1)"],["0.333333333333333","rgba(49,104,142,1)"],["0.375","rgba(44,114,142,1)"],["0.416666666666667","rgba(40,124,142,1)"],["0.458333333333333","rgba(36,134,142,1)"],["0.5","rgba(33,144,141,1)"],["0.541666666666667","rgba(31,154,138,1)"],["0.583333333333333","rgba(32,164,134,1)"],["0.625","rgba(39,173,129,1)"],["0.666666666666667","rgba(53,183,121,1)"],["0.708333333333333","rgba(71,193,110,1)"],["0.75","rgba(93,200,99,1)"],["0.791666666666667","rgba(117,208,84,1)"],["0.833333333333333","rgba(143,214,68,1)"],["0.875","rgba(170,220,50,1)"],["0.916666666666667","rgba(199,224,32,1)"],["0.958333333333333","rgba(227,228,24,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[48.5,36.6,31.3,52.8,28.1,26.5,33.1,43.2,37.5,40.9,29.3,32.4,41.1,48.7,41.3,41.6,60.4,47.5,46.7,37.2,37.1,44.1,35.2,52.8,48.7,35.9,37.9,39.3,41.1,33.7,26.8,33.6,44.1,35.1,46.7,50,36.6,40.8,42.2,42.7,39.3,51.3,34.1,18.1,41.4,38.8,35.5,53.6,38.5,30.9]}},"geo":"geo","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="exploring-trends-in-death-from-lung-cancer" class="section level2">
<h2>Exploring Trends in Death From Lung Cancer</h2>
<pre class="r"><code>read_death_time =
  read_excel(&quot;data/DeathTrend.xlsx&quot;, 
             skip = 6) %&gt;%
  janitor::clean_names()

x = c(&quot;colorectum_female&quot;, &quot;colorectum_male&quot;, &quot;liver_and_intrahepatic_bile_duct_female&quot;,
      &quot;liver_and_intrahepatic_bile_duct_male&quot;, &quot;lung_and_bronchus_female&quot;, 
      &quot;lung_and_bronchus_male&quot;, &quot;ovary_female&quot;, &quot;uterus_cervix_and_corpus_combined_female&quot;)

remove_note = function(column_name) {
  read_death_time = read_death_time %&gt;% 
    separate(column_name, into = c(column_name, &quot;note&quot;), sep = &quot;\\-&quot;) %&gt;% 
    select(-note)}

for (i in x) {
  read_death_time = remove_note(i)} 

death_time =
  read_death_time %&gt;%
  filter(year %in% 2000:2016) %&gt;%
  select(-c(&quot;breast_male&quot;, &quot;ovary_male&quot;, &quot;prostate_female&quot;,
            &quot;uterus_cervix_and_corpus_combined_male&quot;)) %&gt;%
  mutate_at(vars(-(&quot;year&quot;)), as.numeric) %&gt;%
  mutate(
   year = as.numeric(year)
  )</code></pre>
<p>Following plot shows the death trend in lung cancer over the same period of time as the previous plot of pollutants. As can be seen, lung cancer has sharply decreased from 2000-2016, which is similar to the trend we see in NO2 and SO2.</p>
<pre class="r"><code>death_time %&gt;% 
  rename(
    male = lung_and_bronchus_male,
    female = lung_and_bronchus_female
  ) %&gt;% 
  pivot_longer(
    female:male,
    names_to = &quot;gender&quot;, 
    values_to = &quot;death_rate&quot;
  ) %&gt;% 
  ggplot(aes(x = year,y = death_rate, group = gender, color = gender)) + 
  geom_point() +
  geom_line() +
  labs(
    title = &quot;Trend in US Death rate from Lung Cancer, 2000-2016&quot;,
    x = &quot;Year&quot;,
    y = &quot;Lung Cancer Death Rate(per 100,000)&quot;
  )</code></pre>
<p><img src="exploratory-analysis_files/figure-html/unnamed-chunk-8-1.png" width="90%" /></p>
<p> </p>
<hr />
</div>
</div>
<div id="exploring-relationship-between-trend-in-death-rate-from-lung-cancer-to-pollution-concentration" class="section level1">
<h1>Exploring relationship between trend in death rate from Lung Cancer to Pollution Concentration</h1>
<p> </p>
<p>After analyzing pollutants and lung cancer mortality/incidence on their own, we combined the pollution data with our data on cancer death and incidence in order to draw conclusions on the correlative effects pollutants have on cancer.</p>
<p>The next series of plots compares the pollutant concentration to the lung cancer death rate, statifying by gender. 6 of the 8 plots show a positive, linear relationship between the pollutant concentration and death rate. The 2 plots are the exception are both for O3, which shows a negative, linear relationship with death rate.</p>
<pre class="r"><code>merged_death_pollution =
merge(death_time, modified_pollution, by = &quot;year&quot;) 


pollutant_variables =
  merged_death_pollution %&gt;% 
  select(no2,o3,so2,co) %&gt;% 
  colnames() %&gt;% 
  as.vector()</code></pre>
<p>Create a for loop to plot Pollutant concentration vs. Lung Cancer Death Rate</p>
<div id="male" class="section level2">
<h2>Male</h2>
<pre class="r"><code>pollutant_variables =
  pollutant_variables %&gt;% 
  as.list()


for (i in pollutant_variables) {
  plot =
  ggplot(merged_death_pollution, aes_string(i,  &quot;lung_and_bronchus_male&quot;)) + 
  geom_point() +
  geom_smooth(method = lm, se = FALSE) +
  labs(title = &quot;Pollutant Concentration vs. Lung Cancer Death Rate(Male)&quot;, 
       y = &quot;Lung Cancer Death Rate(per 100,000)&quot;) +
  theme(plot.title = element_text(hjust = 0.5, face = &quot;bold&quot;))
  
  print(plot)
  
}</code></pre>
<p><img src="exploratory-analysis_files/figure-html/unnamed-chunk-10-1.png" width="90%" /><img src="exploratory-analysis_files/figure-html/unnamed-chunk-10-2.png" width="90%" /><img src="exploratory-analysis_files/figure-html/unnamed-chunk-10-3.png" width="90%" /><img src="exploratory-analysis_files/figure-html/unnamed-chunk-10-4.png" width="90%" /></p>
</div>
<div id="female" class="section level2">
<h2>Female</h2>
<pre class="r"><code>for (i in pollutant_variables) {
  plot =
  ggplot(merged_death_pollution, aes_string(i,  &quot;lung_and_bronchus_female&quot;)) + 
  geom_point() +
  geom_smooth(method = lm, se = FALSE) +
  labs(title = &quot;Pollutant Concentration vs. Lung Cancer Death Rate(Female)&quot;, 
       y = &quot;Lung Cancer Death Rate(per 100,000)&quot;) +
  theme(plot.title = element_text(hjust = 0.5, face = &quot;bold&quot;))
  
  print(plot)
  
}</code></pre>
<p><img src="exploratory-analysis_files/figure-html/unnamed-chunk-11-1.png" width="90%" /><img src="exploratory-analysis_files/figure-html/unnamed-chunk-11-2.png" width="90%" /><img src="exploratory-analysis_files/figure-html/unnamed-chunk-11-3.png" width="90%" /><img src="exploratory-analysis_files/figure-html/unnamed-chunk-11-4.png" width="90%" /></p>
<hr />
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
